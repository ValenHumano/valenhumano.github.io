<!doctype html>
<html lang="es">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Feliz Cumplea√±os Mi Amor ‚ù§Ô∏è</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap');
        
        :root {
            --purple-dark: #4a0e4e;
            --purple-main: #8b5cf6;
            --purple-light: #a78bfa;
            --purple-soft: #c4b5fd;
            --purple-fade: rgba(139, 92, 246, 0.1);
            --gold: #fbbf24;
            --pink: #f472b6;
            --white: #ffffff;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            height: 100%;
            font-family: 'Poppins', sans-serif;
            overflow-x: hidden;
            scroll-behavior: smooth;
        }

        /* COUNTDOWN PAGE STYLES */
        .countdown-page {
            background: linear-gradient(135deg, #1a0033, #2d1b69, #4c1d95);
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .countdown-page::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="20" cy="20" r="1" fill="white" opacity="0.3"/><circle cx="80" cy="40" r="0.5" fill="white" opacity="0.4"/><circle cx="40" cy="80" r="1.5" fill="white" opacity="0.2"/><circle cx="90" cy="90" r="0.8" fill="white" opacity="0.5"/></svg>') repeat;
            animation: twinkle 3s ease-in-out infinite alternate;
        }

        @keyframes twinkle {
            0% { opacity: 0.3; }
            100% { opacity: 0.8; }
        }

        .countdown-title {
            font-size: clamp(2rem, 8vw, 4rem);
            font-weight: 700;
            text-align: center;
            margin-bottom: 1rem;
            background: linear-gradient(45deg, var(--purple-light), var(--pink), var(--gold));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: glow 2s ease-in-out infinite alternate;
        }

        @keyframes glow {
            0% { filter: drop-shadow(0 0 10px rgba(139, 92, 246, 0.5)); }
            100% { filter: drop-shadow(0 0 20px rgba(139, 92, 246, 0.8)); }
        }

        .countdown-subtitle {
            font-size: clamp(1rem, 4vw, 1.5rem);
            text-align: center;
            margin-bottom: 3rem;
            opacity: 0.9;
        }

        .clock-container {
            position: relative;
            margin-bottom: 3rem;
        }

        .clock {
            width: clamp(200px, 40vw, 300px);
            height: clamp(200px, 40vw, 300px);
            border: 4px solid var(--purple-light);
            border-radius: 50%;
            position: relative;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            box-shadow: 0 0 50px rgba(139, 92, 246, 0.3);
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .countdown-display {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: clamp(0.5rem, 3vw, 1.5rem);
            margin-bottom: 2rem;
            max-width: 100%;
        }

        .time-unit {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: clamp(1rem, 4vw, 2rem);
            text-align: center;
            border: 2px solid var(--purple-soft);
            min-width: 0;
        }

        .time-number {
            font-size: clamp(1.5rem, 6vw, 3rem);
            font-weight: 700;
            display: block;
            color: var(--gold);
        }

        .time-label {
            font-size: clamp(0.7rem, 3vw, 1rem);
            opacity: 0.8;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .hearts {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 10;
        }

        .heart {
            color: var(--pink);
            font-size: clamp(1rem, 4vw, 2rem);
            animation: float-up 4s ease-out forwards;
            position: absolute;
            filter: drop-shadow(0 0 5px rgba(244, 114, 182, 0.6));
        }

        @keyframes float-up {
            0% {
                opacity: 1;
                transform: translateY(0) rotate(0deg) scale(1);
            }
            20% {
                opacity: 1;
                transform: translateY(-20vh) rotate(30deg) scale(1.2);
            }
            100% {
                opacity: 0;
                transform: translateY(-120vh) rotate(360deg) scale(0.5);
            }
        }

        /* MAIN PAGE STYLES */
        .main-page {
            background: linear-gradient(135deg, #1e1b4b, #4c1d95, #7c3aed);
            min-height: 100vh;
            position: relative;
            padding: 2rem 1rem;
            display: none;
        }

        .floating-elements {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
            opacity: 0.6;
        }

        .butterfly, .flower, .sparkle {
            position: absolute;
            animation-timing-function: ease-in-out;
            animation-iteration-count: infinite;
            transition: all 0.4s ease;
        }

        .butterfly {
            font-size: 1.5rem;
            opacity: 0.6;
        }

        .butterfly:nth-child(1) {
            animation: butterfly-pattern-1 6s ease-in-out infinite;
        }

        .butterfly:nth-child(2) {
            animation: butterfly-pattern-2 8s ease-in-out infinite;
            animation-delay: -2s;
        }

        .flower {
            font-size: 1.2rem;
            animation-name: gentle-fall;
            animation-duration: 10s;
            opacity: 0.3;
        }

        .sparkle {
            font-size: 0.8rem;
            animation-name: gentle-twinkle;
            animation-duration: 3s;
            opacity: 0.5;
        }

        @keyframes butterfly-pattern-1 {
            0% { 
                transform: translateX(0) translateY(0) rotate(0deg) scale(1); 
                opacity: 0.4;
            }
            15% { 
                transform: translateX(40px) translateY(-25px) rotate(8deg) scale(1.1); 
                opacity: 0.7;
            }
            30% { 
                transform: translateX(10px) translateY(-45px) rotate(-5deg) scale(0.9); 
                opacity: 0.8;
            }
            45% { 
                transform: translateX(-30px) translateY(-20px) rotate(12deg) scale(1.2); 
                opacity: 0.6;
            }
            60% { 
                transform: translateX(-60px) translateY(10px) rotate(-8deg) scale(1); 
                opacity: 0.7;
            }
            75% { 
                transform: translateX(-20px) translateY(30px) rotate(6deg) scale(1.1); 
                opacity: 0.5;
            }
            90% { 
                transform: translateX(20px) translateY(15px) rotate(-3deg) scale(0.95); 
                opacity: 0.6;
            }
            100% { 
                transform: translateX(0) translateY(0) rotate(0deg) scale(1); 
                opacity: 0.4;
            }
        }

        @keyframes butterfly-pattern-2 {
            0% { 
                transform: translateX(0) translateY(0) rotate(0deg) scale(1); 
                opacity: 0.3;
            }
            20% { 
                transform: translateX(-50px) translateY(-30px) rotate(-10deg) scale(1.3); 
                opacity: 0.8;
            }
            35% { 
                transform: translateX(-80px) translateY(5px) rotate(15deg) scale(0.8); 
                opacity: 0.6;
            }
            50% { 
                transform: translateX(-30px) translateY(40px) rotate(-7deg) scale(1.1); 
                opacity: 0.9;
            }
            65% { 
                transform: translateX(25px) translateY(60px) rotate(12deg) scale(1.2); 
                opacity: 0.4;
            }
            80% { 
                transform: translateX(70px) translateY(20px) rotate(-15deg) scale(0.9); 
                opacity: 0.7;
            }
            95% { 
                transform: translateX(35px) translateY(-10px) rotate(5deg) scale(1.05); 
                opacity: 0.5;
            }
            100% { 
                transform: translateX(0) translateY(0) rotate(0deg) scale(1); 
                opacity: 0.3;
            }
        }

        @keyframes gentle-fall {
            0% { 
                transform: translateY(-50px) rotate(0deg); 
                opacity: 0; 
            }
            20% { 
                opacity: 0.3; 
            }
            80% { 
                opacity: 0.3; 
            }
            100% { 
                transform: translateY(calc(100vh + 50px)) rotate(180deg); 
                opacity: 0; 
            }
        }

        @keyframes gentle-twinkle {
            0%, 100% { 
                transform: scale(0.5) rotate(0deg); 
                opacity: 0.2; 
            }
            50% { 
                transform: scale(1) rotate(90deg); 
                opacity: 0.8; 
            }
        }

        .main-header {
            text-align: center;
            margin-bottom: 3rem;
            position: relative;
            z-index: 2;
        }

        .main-title {
            font-size: clamp(2.5rem, 8vw, 4rem);
            font-weight: 700;
            background: linear-gradient(45deg, var(--gold), var(--pink), var(--purple-light));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 1rem;
        }

        .main-subtitle {
            color: white;
            font-size: clamp(1rem, 4vw, 1.5rem);
            opacity: 0.9;
        }

        .cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 2rem;
            max-width: 1400px;
            margin: 0 auto;
            position: relative;
            z-index: 2;
            padding: 2rem;
        }

        .card {
            background: linear-gradient(145deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.05));
            backdrop-filter: blur(15px);
            border-radius: 25px;
            padding: 2rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            text-align: center;
            position: relative;
            overflow: hidden;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .card::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, 
                transparent 30%, 
                rgba(251, 191, 36, 0.1) 40%, 
                rgba(168, 139, 250, 0.1) 50%, 
                rgba(244, 114, 182, 0.1) 60%, 
                transparent 70%);
            border-radius: 25px;
            z-index: -1;
            opacity: 0;
            transition: opacity 0.4s ease;
        }

        .card::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.1) 0%, transparent 70%);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: all 0.6s ease;
            z-index: 0;
        }

        .card:hover::before {
            opacity: 1;
        }

        .card:hover::after {
            width: 300px;
            height: 300px;
        }

        .card:hover {
            transform: translateY(-15px) scale(1.02);
            box-shadow: 0 25px 50px rgba(139, 92, 246, 0.2);
            border-color: rgba(251, 191, 36, 0.4);
        }

        .card-content {
            position: relative;
            z-index: 1;
        }

        .card-image {
            width: 100%;
            height: 220px;
            background: linear-gradient(135deg, var(--purple-fade), rgba(255, 255, 255, 0.05));
            border-radius: 20px;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3.5rem;
            position: relative;
            overflow: hidden;
            box-shadow: inset 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .card-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 20px;
            transition: opacity 0.3s ease;
            background: linear-gradient(135deg, var(--purple-fade), rgba(255, 255, 255, 0.05));
        }

        .card-image img.loading {
            opacity: 0.3;
        }

        .card-image img.loaded {
            opacity: 1;
        }

        .card-title {
            color: white;
            font-size: 1.4rem;
            font-weight: 600;
            margin-bottom: 0.8rem;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            letter-spacing: 0.5px;
        }

        .card-description {
            color: rgba(255, 255, 255, 0.9);
            font-size: 1rem;
            line-height: 1.5;
            font-weight: 400;
        }

        /* MODAL STYLES */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(5px);
        }

        .modal.show {
            display: flex;
            align-items: center;
            justify-content: center;
            animation: modalFadeIn 0.5s ease;
        }

        @keyframes modalFadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background: linear-gradient(135deg, var(--purple-dark), var(--purple-main));
            margin: 1rem;
            padding: 2rem;
            border-radius: 25px;
            max-width: 90%;
            max-height: 90%;
            overflow-y: auto;
            position: relative;
            border: 3px solid var(--gold);
            box-shadow: 0 0 50px rgba(139, 92, 246, 0.5);
            animation: modalSlideIn 0.5s ease;
        }

        @keyframes modalSlideIn {
            from { transform: scale(0.7) translateY(-50px); opacity: 0; }
            to { transform: scale(1) translateY(0); opacity: 1; }
        }

        .close {
            color: var(--gold);
            float: right;
            font-size: 2rem;
            font-weight: bold;
            cursor: pointer;
            line-height: 1;
        }

        .close:hover {
            color: var(--pink);
        }

        .modal-title {
            color: var(--gold);
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 1rem;
            text-align: center;
        }

        .modal-text {
            color: white;
            font-size: 1.1rem;
            line-height: 1.6;
            text-align: center;
            margin-bottom: 1.5rem;
        }

        .modal-image {
            width: 100%;
            max-width: 400px;
            height: 300px;
            background: var(--purple-fade);
            border-radius: 15px;
            margin: 1rem auto;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 4rem;
        }

        .fireworks {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 999;
        }

        .firework {
            position: absolute;
            width: 4px;
            height: 4px;
            border-radius: 50%;
            animation: explode 1s ease-out forwards;
        }

        @keyframes explode {
            0% { 
                transform: scale(1);
                opacity: 1;
            }
            100% { 
                transform: scale(20);
                opacity: 0;
            }
        }

        /* RESPONSIVE DESIGN */
        @media (max-width: 768px) {
            .cards-grid {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
                gap: 1rem;
                padding: 0 0.5rem;
            }
            
            .countdown-display {
                grid-template-columns: repeat(2, 1fr);
                gap: 1rem;
            }
            
            .modal-content {
                margin: 0.5rem;
                padding: 1.5rem;
            }
        }

        @media (max-width: 480px) {
            .cards-grid {
                grid-template-columns: 1fr;
            }
            
            .card {
                padding: 1rem;
            }
            
            .card-image {
                height: 150px;
            }
        }

        .hidden {
            display: none !important;
        }

        .show {
            display: block !important;
        }

        .card-image img.loading {
            opacity: 0.3;
        }

        .card-image img.loaded {
            opacity: 1;
        }

        /* Optimizaci√≥n de scroll */
        .cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 2rem;
            max-width: 1400px;
            margin: 0 auto;
            position: relative;
            z-index: 2;
            padding: 2rem;
            will-change: scroll-position;
        }

        .card {
            background: linear-gradient(145deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.05));
            backdrop-filter: blur(15px);
            border-radius: 25px;
            padding: 2rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            text-align: center;
            position: relative;
            overflow: hidden;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            will-change: transform;
            transform: translateZ(0); /* Forzar aceleraci√≥n por hardware */
        }

        .card-title {
            color: white;
            font-size: 1.4rem;
            font-weight: 600;
            margin-bottom: 0.8rem;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            letter-spacing: 0.5px;
        }

        .card-description {
            color: rgba(255, 255, 255, 0.9);
            font-size: 1rem;
            line-height: 1.5;
            font-weight: 400;
        }
    </style>
</head>
<body>
    <!-- COUNTDOWN PAGE -->
    <div id="countdownPage" class="countdown-page">
        <div class="hearts" id="hearts"></div>
        
        <h1 class="countdown-title">¬°Falta poco mi amor! ‚ù§Ô∏è</h1>
        <p class="countdown-subtitle">Hasta tu cumplea√±os 29, vas a tener que esperar para ver tu regalo...</p>
        
        <div class="clock-container">
            <div class="clock"></div>
        </div>
        
        <div class="countdown-display">
            <div class="time-unit">
                <span class="time-number" id="days">00</span>
                <span class="time-label">D√≠as</span>
            </div>
            <div class="time-unit">
                <span class="time-number" id="hours">00</span>
                <span class="time-label">Horas</span>
            </div>
            <div class="time-unit">
                <span class="time-number" id="minutes">00</span>
                <span class="time-label">Min</span>
            </div>
            <div class="time-unit">
                <span class="time-number" id="seconds">00</span>
                <span class="time-label">Seg</span>
            </div>
        </div>
        
        <p style="text-align: center; opacity: 0.8; margin-top: 2rem;">
            Haz clic en cualquier lugar y ve qu√© pasa ‚ù§Ô∏è
        </p>
    </div>

    <!-- MAIN PAGE -->
    <div id="mainPage" class="main-page">
        <!-- Floating Elements -->
        <div class="floating-elements">
            <div class="butterfly" style="top: 15%; left: 12%;">ü¶ã</div>
            <div class="butterfly" style="top: 25%; right: 18%;">ü¶ã</div>
            <div class="sparkle" style="top: 40%; left: 25%;">‚ú®</div>
            <div class="sparkle" style="top: 70%; right: 30%;">‚≠ê</div>
            <div class="sparkle" style="top: 85%; left: 65%;">üí´</div>
        </div>

        <header class="main-header">
            <h1 class="main-title">¬°Feliz Cumplea√±os Mi Amor!</h1>
            <p class="main-subtitle">29 cartas para mis 29 razones de amarte</p>
        </header>

        <div class="cards-grid" id="cardsGrid">
            <!-- Las cartas se generar√°n din√°micamente -->
        </div>
    </div>

    <!-- MODAL -->
    <div id="modal" class="modal">
        <div class="modal-content">
            <span class="close" id="closeModal">&times;</span>
            <h2 class="modal-title" id="modalTitle">T√≠tulo</h2>
            <div class="modal-image" id="modalImage">üì∑</div>
            <p class="modal-text" id="modalText">Contenido del modal</p>
        </div>
    </div>

    <!-- FIREWORKS CONTAINER -->
    <div class="fireworks" id="fireworks"></div>

    <!-- BACKGROUND MUSIC -->
    <audio id="backgroundMusic" loop preload="auto" crossorigin="anonymous">
        <!-- URL m√°s confiable para You're Beautiful -->
        <!-- <source src="https://archive.org/download/JamesBluntYoureBeautiful/James%20Blunt%20-%20You%27re%20Beautiful.mp3" type="audio/mpeg"> -->
        <!-- Fallback local si tienes el archivo -->
        <source src="you-re-beautiful.mp3" type="audio/mpeg">
        <!-- Alternativa: usar una URL de SoundCloud o YouTube (con permisos) -->
        <!-- <source src="https://www.learningcontainer.com/wp-content/uploads/2020/02/Kalimba.mp3" type="audio/mpeg"> -->
        Tu navegador no soporta el elemento de audio.
    </audio>

    <!-- MUSIC CONTROLS -->
    <div id="musicControls" style="
        position: fixed; 
        bottom: 20px; 
        right: 20px; 
        z-index: 1001; 
        background: rgba(139, 92, 246, 0.9); 
        border-radius: 50px; 
        padding: 15px 20px; 
        backdrop-filter: blur(10px);
        border: 2px solid var(--gold);
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        display: none;
    ">
        <button id="playPauseBtn" style="
            background: none; 
            border: none; 
            color: white; 
            font-size: 1.5rem; 
            cursor: pointer;
            margin-right: 10px;
            transition: transform 0.2s ease;
        " title="Reproducir/Pausar m√∫sica">üéµ</button>
        <button id="volumeBtn" style="
            background: none; 
            border: none; 
            color: white; 
            font-size: 1.2rem; 
            cursor: pointer;
            transition: transform 0.2s ease;
        " title="Silenciar/Activar">üîä</button>
        <input type="range" id="volumeSlider" min="0" max="1" step="0.1" value="0.5" style="
            margin-left: 10px;
            width: 80px;
            accent-color: var(--gold);
        ">
    </div>

    <script>
        // Card themes and content
        const cardThemes = [
            {
                title: "üíï",
                emoji: "",
                description: "Nuestra vida juntos",
                content: "Convivir contigo ha sido sin duda una experiencia maravillosa. Cada d√≠a a tu lado es una bendici√≥n que atesoro profundamente (o que valor√≥ haber sobrevivido), sin dudas conocerte en cada detalle es algo incre√≠ble que adoro y apreci√≥ cada d√≠a.",
                image: "b.jpeg"
            },
            {
                title: "La Paz - Bolivia üèîÔ∏è",
                emoji: "üèîÔ∏è",
                description: "Donde nos conocimos y comenz√≥ nuestra historia",
                content: "En las alturas de La Paz, entre monta√±as y cielos infinitos debajo de Illimani, casi muero, pero tu amor me salv√≥.",
                image: "a.jpeg"
            },
            {
                title: "Amorüíï",
                emoji: "üíï",
                description: "Mi coraz√≥n late solo para ti",
                content: "No hay palabras suficientes para expresar lo que sientes por m√≠. No eres ni por asomo mi alma gemela pero s√≠ mi complemento perfecto, mi amor eterno.",
                image: "c.jpeg"
            },
            {
                title: "John Wick",
                emoji: "üï¥Ô∏è",
                description: "Lo que har√≠a si te pasar√° algo",
                content: "Si alguien se atreviera a hacerte da√±o, desatar√≠a mi furia como John Wick. Protegerte es mi misi√≥n sagrada, y nadie se interpondr√° entre nosotros.",
                image: "d.jpeg"
            },
            {
                title: "Nuestra Boda üíí",
                emoji: "üíí",
                description: "El d√≠a m√°s feliz de nuestras vidas",
                content: "Ese d√≠a dijimos 's√≠' para toda la vida. Fue perfecto(sacando todo lo que no sali√≥ bien) porque estabas t√∫, radiante como un √°ngel(marr√≥n), prometi√©n(dome) amor eterno.",
                image: "e.jpeg"
            },
            {
                title: "Ceviche Delicioso üêü",
                emoji: "üêü",
                description: "Tu platillo peruano favorito",
                content: "Cada vez que comemos ceviche, veo tu sonrisa de felicidad. Me encanta verte disfrutar cada bocado, especialmente cuando yo lo preparo para ti.",
                image: "f.jpeg"
            },
            {
                title: "üíú",
                emoji: "üíú",
                description: "El color que te hace brillar",
                content: "El morado intuyo que es tu color favorito, realza tu belleza natural (matame si no te sirvo [grito de sapucay]). ",
                image: "g.jpeg"
            },
            {
                title: "Mango ü•≠",
                emoji: "ü•≠",
                description: "Dulce como tu sonrisa",
                content: "Los mangos me recuerdan a ti: dulces, tropicales, y hay que agarrarlos el d√≠a justo, tener paciencia, son caros, pero deliciosos.",
                image: "h.jpeg"
            },
            {
                title: "Matambre ü•©",
                emoji: "ü•©",
                description: "Igual que el mango, pero salado",
                content: "Ver tu cara de felicidad cuando est√° perfecto no tiene precio, al igual que el matambre un amor como el nuestro es dif√≠cil de cocinar.",
                image: "i.jpeg"
            },
            {
                title: "Chocolate üç´",
                emoji: "üç´",
                description: "Dulces momentos juntos",
                content: "Eres dulce como el chocolate, y a√∫n m√°s marr√≥n",
                image: "j.jpeg"
            },
            {
                title: "üå∂Ô∏è",
                emoji: "üå∂Ô∏è",
                description: "Takis",
                content: "Me encanta verte disfrutar tus Takis, con esa cara de felicidad mientras sientes el picante. Eres picante y dulce a la vez, a veces una, la otra o juntas.",
                image: "k.jpeg"
            },
            {
                title: "üî•",
                emoji: "üî•",
                description: "Eres mi fuego",
                content: "Tu pasi√≥n y energ√≠a iluminan mi vida. Eres el fuego que enciende mi coraz√≥n y me impulsa a ser mejor.",
                image: "l.jpeg"
            },
            {
                title: "Mate üßâ",
                emoji: "üßâ",
                description: "La que  no toma mates",
                content: "Pensar que no tomabas, ahora eres la reina del mate.",
                image: "m.jpeg"
            },
            {
                title: "Salud üèÉ‚Äç‚ôÄÔ∏è",
                emoji: "üèÉ‚Äç‚ôÄÔ∏è",
                description: "",
                content: "Te gusta la salud, a mi me gusta tener salud, recuerda eso antes de tirarme por la ventana.",
                image: "n.jpeg"
            },
            {
                title: "üë´",
                emoji: "üë´",
                description: "caminar contigo, de mis mejores momentos",
                content: "Tomados de la mano, con solcito, charlando, evitando que te suicides. Los mejores momentos son esos.",
                image: "o.jpeg"
            },
            {
                title: "üòÇ",
                emoji: "üòÇ",
                description: "Tu risa es perfecta y blanca(?)",
                content: "Me gusta versete sonre√≠r, casi tanto como hacerte enojar.",
                image: "p.jpeg"
            },
            {
                title: "PE",
                emoji: "",
                description: "",
                content: "Tu herencia peruana es parte de lo que te hace √∫nica. Me encanta aprender de tu cultura, tus tradiciones y tu hermosa forma de ver la vida.",
                image: "q.jpeg"
            },
            {
                title: "Siempre Estar√© Aqu√≠ ü§ù",
                emoji: "ü§ù",
                description: "Mi promesa eterna",
                content: "En los buenos y malos momentos, en la alegr√≠a y la tristeza, siempre estar√© a tu lado. Eres mi compa√±era de vida, mi apoyo incondicional.",
                image: "r.jpeg"
            },
            {
                title: "Eres Lo Mejor Que Me Pas√≥ üåü",
                emoji: "üåü",
                description: "Mi milagro personal",
                content: "Antes de ti, no sab√≠a lo que era el amor verdadero. Llegaste a mi vida como un regalo del cielo y la transformaste por completo.",
                image: "s.jpeg"
            },
            {
                title: "üåô",
                emoji: "üåô",
                description: "El futuro que construiremos",
                content: "Cada sue√±o que tengo incluye tu sonrisa. Juntos haremos realidad todos nuestros planes, porque contigo todo es posible.",
                image: "t.jpeg"
            },
            {
                title: "Tu Belleza Interior(tambi√©n) ‚ú®",
                emoji: "‚ú®",
                description: "Lo que realmente me enamora",
                content: "Eres hermosa por fuera, pero tu alma es lo que me conquist√≥. Tu bondad, tu fortaleza y tu coraz√≥n puro son tu verdadera belleza.",
                image: "u.jpeg"
            },
            {
                title: "üó∫Ô∏è",
                emoji: "üó∫Ô∏è",
                description: "Explorando el mundo contigo",
                content: "Cada lugar es m√°s hermoso cuando est√°s conmigo. No importa el destino(solo si no me intenta matar), porque el mejor viaje es el que hago a tu lado.",
                image: "v.jpeg"
            },
            {
                title: "Tu Fortaleza",
                emoji: "",
                description: "Mi guerrera azteca",
                content: "Admiro tu fuerza, tu determinaci√≥n y tu valent√≠a. Eres una mujer incre√≠ble que me inspira a ser mejor persona cada d√≠a.",
                image: "w.jpeg"
            },
            {
                title: "üì∑",
                emoji: "üì∑",
                description: "Momentos",
                content: "Cada fotograf√≠a cuenta una historia de amor. Cada recuerdo juntos es un tesoro que guardo en mi coraz√≥n para siempre.",
                image: "x.jpeg"
            },
            {
                title: "Tu Cumplea√±os üéÇ",
                emoji: "üéÇ",
                description: "El d√≠a que celebramos tu vida",
                content: "Hoy celebramos no solo tu cumplea√±os, sino el regalo que significa tener tu amor. 29 a√±os de tu existencia que han hecho el mundo m√°s hermoso.",
                image: "y.jpeg"
            },
            {
                title: "‚ôæÔ∏è",
                emoji: "‚ôæÔ∏è",
                description: "Sin principio ni fin",
                content: "Te amo hoy, te amar√© ma√±ana y te amar√© por toda la eternidad. Nuestro amor es infinito, como las estrellas en el cielo.",
                image: "z.jpeg"
            },
            {
                title: "üíç",
                emoji: "üíç",
                description: "Para toda la vida",
                content: "Te prometo amarte cada d√≠a m√°s que el anterior. Te prometo ser tu compa√±ero fiel, tu mejor amigo y tu amor eterno. ¬°Feliz cumplea√±os, mi vida!",
                image: "a1.jpeg"
            },
            {
                title: "Juntos Para Siempre siempre siempre siempreeee... üë´",
                emoji: "üë´",
                description: "Nuestro final feliz",
                content: "Esta no es la √∫ltima carta, porque nuestro amor no tiene final. Cada d√≠a escribimos una nueva p√°gina en nuestra historia de amor.",
                image: "b1.jpeg"
            },
            {
                title: "¬°29 üéâ!",
                emoji: "üéâ",
                description: "",
                content: "29 a√±os de tu vida significan 29 a√±os de bendiciones para este mundo. Gracias por existir, por amarme y por ser la mujer m√°s incre√≠ble que conozco. ¬°FELIZ CUMPLEA√ëOS MI AMOR ETERNO!",
                image: "√±.jpeg"
            }
        ];

        // Countdown functionality
        const targetDate = new Date('January 1, 2026 00:00:00').getTime();

        function updateCountdown() {
            const now = new Date().getTime();
            const distance = targetDate - now;

            if (distance > 0) {
                const days = Math.floor(distance / (1000 * 60 * 60 * 24));
                const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((distance % (1000 * 60)) / 1000);

                document.getElementById('days').textContent = days.toString().padStart(2, '0');
                document.getElementById('hours').textContent = hours.toString().padStart(2, '0');
                document.getElementById('minutes').textContent = minutes.toString().padStart(2, '0');
                document.getElementById('seconds').textContent = seconds.toString().padStart(2, '0');
            } else {
                // Show main page
                document.getElementById('countdownPage').style.display = 'none';
                document.getElementById('mainPage').style.display = 'block';
                generateCards();
                startFloatingElements();
                showMusicControls();
            }
        }

        // Heart creation - multiple hearts from click point
        function createHeart(x, y) {
            const heartsContainer = document.getElementById('hearts');
            const heartEmojis = ['‚ù§Ô∏è', 'üíï', 'üíñ', 'üíó', 'üíù'];
            const numHearts = 8; // M√°s corazones

            for (let i = 0; i < numHearts; i++) {
                setTimeout(() => {
                    const heart = document.createElement('div');
                    heart.className = 'heart';
                    heart.innerHTML = heartEmojis[Math.floor(Math.random() * heartEmojis.length)];
                    
                    // Posici√≥n exacta del clic con ligera variaci√≥n
                    const offsetX = (Math.random() - 0.5) * 60; // Variaci√≥n horizontal
                    const offsetY = (Math.random() - 0.5) * 30; // Variaci√≥n vertical
                    
                    heart.style.left = (x + offsetX) + 'px';
                    heart.style.top = (y + offsetY) + 'px';
                    
                    heartsContainer.appendChild(heart);
                    
                    setTimeout(() => {
                        if (heart.parentNode) {
                            heart.remove();
                        }
                    }, 4000);
                }, i * 100); // Escalonar la aparici√≥n
            }
        }

        // Generate cards with optimized image loading
        function generateCards() {
            const grid = document.getElementById('cardsGrid');
            grid.innerHTML = '';

            cardThemes.forEach((theme, index) => {
                const card = document.createElement('div');
                card.className = 'card';
                
                // Pre-crear el contenido con loading lazy para mejor rendimiento
                card.innerHTML = `
                    <div class="card-content">
                        <div class="card-image">
                            <img src="${theme.image}" 
                                 alt="${theme.title}" 
                                 loading="lazy" 
                                 class="loading"
                                 onload="this.classList.remove('loading');this.classList.add('loaded');"
                                 onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                            <div style="display:none; font-size: 3.5rem;">${theme.emoji}</div>
                        </div>
                        <h3 class="card-title">${theme.title}</h3>
                        <p class="card-description">${theme.description}</p>
                    </div>
                `;
                
                card.addEventListener('click', () => openModal(theme));
                grid.appendChild(card);
                
                // Pre-cargar im√°genes importantes (las primeras 6)
                if (index < 6) {
                    const img = new Image();
                    img.src = theme.image;
                }
            });
        }

        // Modal functionality
        function openModal(theme) {
            const modal = document.getElementById('modal');
            const modalTitle = document.getElementById('modalTitle');
            const modalText = document.getElementById('modalText');
            const modalImage = document.getElementById('modalImage');

            modalTitle.textContent = theme.title;
            modalText.textContent = theme.content;
            modalImage.innerHTML = `
                <img src="${theme.image}" alt="${theme.title}" style="width:100%;height:100%;object-fit:cover;border-radius:15px;" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                <div style="display:none; font-size: 6rem;">${theme.emoji}</div>
            `;

            modal.classList.add('show');
            createFireworks();
        }

        function closeModal() {
            document.getElementById('modal').classList.remove('show');
        }

        // Fireworks
        function createFireworks() {
            const fireworksContainer = document.getElementById('fireworks');
            const colors = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#f9ca24', '#f0932b', '#eb4d4b', '#6c5ce7'];
            
            for (let i = 0; i < 15; i++) {
                setTimeout(() => {
                    const firework = document.createElement('div');
                    firework.className = 'firework';
                    firework.style.left = Math.random() * window.innerWidth + 'px';
                    firework.style.top = Math.random() * window.innerHeight + 'px';
                    firework.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                    
                    fireworksContainer.appendChild(firework);
                    
                    setTimeout(() => {
                        firework.remove();
                    }, 1000);
                }, i * 100);
            }
        }

        // Start floating elements animation - more dynamic butterflies
        function startFloatingElements() {
            const butterflies = document.querySelectorAll('.butterfly');
            const sparkles = document.querySelectorAll('.sparkle');
            
            // Animate butterflies with more complex patterns
            butterflies.forEach((butterfly, index) => {
                let baseX = parseFloat(butterfly.style.left || '0');
                let baseY = parseFloat(butterfly.style.top || '0');
                let directionX = 1;
                let directionY = 1;
                let speed = 0.5 + Math.random() * 0.5; // Variable speed
                
                setInterval(() => {
                    // Create more natural flight patterns
                    const time = Date.now() * 0.001; // Current time in seconds
                    const waveX = Math.sin(time * speed + index) * 15;
                    const waveY = Math.cos(time * speed * 1.3 + index) * 10;
                    
                    // Add some random movement
                    const randomX = (Math.random() - 0.5) * 20;
                    const randomY = (Math.random() - 0.5) * 15;
                    
                    // Calculate new position
                    let newX = baseX + waveX + randomX * 0.3;
                    let newY = baseY + waveY + randomY * 0.3;
                    
                    // Bounce off edges
                    if (newX < 5 || newX > 90) {
                        directionX *= -1;
                        baseX = Math.max(5, Math.min(90, newX));
                    }
                    if (newY < 10 || newY > 80) {
                        directionY *= -1;
                        baseY = Math.max(10, Math.min(80, newY));
                    }
                    
                    // Occasionally change base position for more dynamic movement
                    if (Math.random() < 0.1) { // 10% chance every interval
                        baseX += (Math.random() - 0.5) * 30 * directionX;
                        baseY += (Math.random() - 0.5) * 20 * directionY;
                        baseX = Math.max(5, Math.min(90, baseX));
                        baseY = Math.max(10, Math.min(80, baseY));
                    }
                    
                    // Apply smooth transitions
                    butterfly.style.transition = 'all 2s cubic-bezier(0.4, 0, 0.2, 1)';
                    butterfly.style.left = Math.max(5, Math.min(90, newX)) + '%';
                    butterfly.style.top = Math.max(10, Math.min(80, newY)) + '%';
                    
                }, 2000 + Math.random() * 2000); // Variable timing
            });
            
            // Sparkles with subtle movement
            sparkles.forEach(sparkle => {
                setInterval(() => {
                    const currentLeft = parseFloat(sparkle.style.left || '0');
                    const currentTop = parseFloat(sparkle.style.top || '0');
                    
                    const newLeft = Math.max(5, Math.min(90, currentLeft + (Math.random() - 0.5) * 8));
                    const newTop = Math.max(10, Math.min(85, currentTop + (Math.random() - 0.5) * 6));
                    
                    sparkle.style.left = newLeft + '%';
                    sparkle.style.top = newTop + '%';
                }, 10000 + Math.random() * 5000); // Slower movement for sparkles
            });
        }

        // Event listeners
        document.addEventListener('click', (e) => {
            if (document.getElementById('countdownPage').style.display !== 'none') {
                createHeart(e.clientX, e.clientY);
            }
        });

        document.getElementById('closeModal').addEventListener('click', closeModal);
        
        document.getElementById('modal').addEventListener('click', (e) => {
            if (e.target === document.getElementById('modal')) {
                closeModal();
            }
        });

        // Start countdown
        updateCountdown();
        setInterval(updateCountdown, 1000);

        // Music functionality - Mejorada
        const backgroundMusic = document.getElementById('backgroundMusic');
        const musicControls = document.getElementById('musicControls');
        const playPauseBtn = document.getElementById('playPauseBtn');
        const volumeBtn = document.getElementById('volumeBtn');
        const volumeSlider = document.getElementById('volumeSlider');

        // Set initial volume
        backgroundMusic.volume = 0.3; // Volumen m√°s bajo inicialmente

        // Better music loading
        backgroundMusic.addEventListener('canplaythrough', () => {
            console.log('Audio ready to play');
        });

        backgroundMusic.addEventListener('error', (e) => {
            console.log('Error loading audio:', e);
            // Si falla, intentar con audio de fallback o mostrar mensaje
            playPauseBtn.textContent = 'üéµ';
            playPauseBtn.title = 'Audio no disponible';
        });

        // Show music controls when main page is displayed
        function showMusicControls() {
            musicControls.style.display = 'block';
            
            // Intentar reproducir solo despu√©s de interacci√≥n del usuario
            setTimeout(() => {
                backgroundMusic.play().then(() => {
                    playPauseBtn.textContent = '‚è∏Ô∏è';
                    console.log('Music started successfully');
                }).catch(e => {
                    console.log('Autoplay blocked or error:', e);
                    playPauseBtn.textContent = '‚ñ∂Ô∏è';
                    playPauseBtn.title = 'Haz clic para reproducir m√∫sica';
                });
            }, 1000); // Esperar 1 segundo antes de intentar reproducir
        }

        // Play/Pause functionality - Mejorada
        playPauseBtn.addEventListener('click', () => {
            if (backgroundMusic.paused) {
                backgroundMusic.play().then(() => {
                    playPauseBtn.textContent = '‚è∏Ô∏è';
                    playPauseBtn.title = 'Pausar m√∫sica';
                }).catch(e => {
                    console.log('Error playing music:', e);
                    playPauseBtn.textContent = '‚ùå';
                    playPauseBtn.title = 'Error reproduciendo m√∫sica';
                });
            } else {
                backgroundMusic.pause();
                playPauseBtn.textContent = '‚ñ∂Ô∏è';
                playPauseBtn.title = 'Reproducir m√∫sica';
            }
        });

        // Volume control
        volumeSlider.addEventListener('input', (e) => {
            backgroundMusic.volume = e.target.value;
            updateVolumeIcon();
        });

        volumeBtn.addEventListener('click', () => {
            if (backgroundMusic.volume > 0) {
                backgroundMusic.volume = 0;
                volumeSlider.value = 0;
            } else {
                backgroundMusic.volume = 0.5;
                volumeSlider.value = 0.5;
            }
            updateVolumeIcon();
        });

        function updateVolumeIcon() {
            if (backgroundMusic.volume === 0) {
                volumeBtn.textContent = 'üîá';
            } else if (backgroundMusic.volume < 0.5) {
                volumeBtn.textContent = 'üîâ';
            } else {
                volumeBtn.textContent = 'üîä';
            }
        }

        // Update play button when music ends or starts
        backgroundMusic.addEventListener('play', () => {
            playPauseBtn.textContent = '‚è∏Ô∏è';
        });

        backgroundMusic.addEventListener('pause', () => {
            playPauseBtn.textContent = '‚ñ∂Ô∏è';
        });

        // Hover effects for music controls
        const musicButtons = document.querySelectorAll('#musicControls button');
        musicButtons.forEach(btn => {
            btn.addEventListener('mouseenter', () => {
                btn.style.transform = 'scale(1.1)';
            });
            btn.addEventListener('mouseleave', () => {
                btn.style.transform = 'scale(1)';
            });
        });

        // For testing - uncomment to skip countdown
        // document.getElementById('countdownPage').style.display = 'none';
        // document.getElementById('mainPage').style.display = 'block';
        // generateCards();
        // startFloatingElements();
        // showMusicControls();
    </script>
</body>
</html>